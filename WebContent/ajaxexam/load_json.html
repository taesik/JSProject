<!DOCTYPE html>
<html>
	<head>
		<title>Insert title here</title>
		<meta charset="utf-8" />
		<!-- html4 : 파일의 인코딩 방식 지정 -->
		<!--<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />-->

		<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
		<!-- 브라우저의 호환성 보기 모드를 막고, 해당 브라우저에서 지원하는 가장 최신 버전의 방식으로 HTML 보여주도록 설정.-->
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
		<!--viewport : 화면에 보이는 영역을 제어하는 기술. width는 device-width로 설정(브라우저 너비를 장치 너비에 맞추어 표시). initial-scale는 초기비율(보이는 영역과 웹 페이지를 맞춤). user-scalable는 사용자가 화면축소를 하지 못하도록 설정.-->
      			
		<link rel="shortcut icon" href="../image/icon.png" />
		<link rel="apple-touch-icon" href="../image/icon.png" />
				
		<!-- IE8 이하에서 HTML5를 인식시키기 위해 아래의 패스필터를 적용-->
		<!--[if lt IE 9]>
			<script src="../js/html5shiv.js"></script>
		<![endif]-->
		<script type="text/javascript" src = "../js/jquery-1.12.4.min.js"></script>
		<script type="text/javascript">
		$(function () {
			/*$.ajax({
				url:"../JSON/book.json",
				type: "get",
				dataType: "json",
				cache:false,
				timeout: 30000,
				success: function (json) {
					//배열까지 접근
					var book = json.books.book;
					//배열 길이 만큼 반복문
					for (var i = 0; i < book.length; i++) {
						//반복 처리 안에서 i번째 요소는 JSON 데이터 자체
						var title = book[i].title;
						var price = book[i].price;
						var author = book[i].author;
						var publisher = book[i].publisher;
						//결과를 출력하기 위한 동적요소의 생성
						var ul = $("<ul>");
						var li1 = $("<li>").html(title);
						var li2 = $("<li>").html(price);
						var li3 = $("<li>").html(author);
						var li4 = $("<li>").html(publisher);
						
						ul.append(li1).append(li2).append(li3).append(li4);
					}
				}
			});*/
			/*$("#mybtn").click(function () {
				$.ajax({
					url: "../JSON/book.json",
					//school에 먼저 접근해야함
					type: "get",
					dataType: "json",
					cache:false,
					timeout: 30000,
					success: function(json) {
						//파라미터로 전달되는 객체는 제이슨 그자체
						var title = json.school.subject.title;
						var time = json.school.subject.time;
						var teacher = json.school.subject.teacher;
						//요소 동적 생성 및 데이터 출력 구현
						var ul = $("<ul>");
						var li1 = $("<li>").html(title);
						var li2 = $("<li>").html(time);
						var li3 = $("<li>").html(teacher);
						$("#result").append(ul.append(li1).append(li2).append(li3));
					}
				
				});
			});*/
			$.getJSON('../JSON/book.json', function(data) {
				/*var book = data.books.book;
				
				for (var i = 0; i < book.length; i++) {
					var title = book[i].title;
					var author = book[i].author;
					var price = book[i].price;
					var publisher = book[i].publisher;
					
					var li = $("<li>").html( title + ", " + author + ", " + price+ ", " + publisher);
					$('#result').append(li);
				}*/
				
				//json  데이터 접근은 this  객체로 가능
				var book = data.books.book;
				$(book).each(function () {
					var title = this.title;
					var author = this.author;
					var price = this.price;
					var li =$("<li>").html( title + ", " + author + ", " + price );
					$("#result").append(li);
				});
			}).fail(function (xhr,status,errorThrown) {
				$("#result").html("오류가 발생했습니다.<br/>").append("오류명: " + errorThrown + "<br/>")
				.append("상태 : "+status);
			});
		});
		</script>
	</head>
		<body>
			<h1 class = "title"> </h1>
			<div class ="exec">
				<input type = "button" value = "JSON 가져오기" id="mybtn">
			</div>
			<div class = "console" id ="result"> </div>
		</body>
	</html>